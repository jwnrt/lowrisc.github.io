<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Updating the kernel of a running system &middot; lowRISC</title>
        <link rel="stylesheet" href="https://www.lowrisc.org/css/styles.combined.min.css" />
        <link rel="shortcut icon" href="https://www.lowrisc.org/favicon.ico" />
        <link rel="alternate" href="https://www.lowrisc.org/index.xml" type="application/rss+xml" title="lowRISC" />
        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' type='text/css'>
        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Exo+2' type='text/css'>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-53520714-1', 'auto');
        ga('send', 'pageview');
      </script>
  </head>

  <body data-page="article">
<div class="header">
  <header data-component="menu">

    <section class="outer-container">
      <div class="image">
        <a href="https://www.lowrisc.org"><img src="https://www.lowrisc.org/img/logo.svg"></a>
      </div>

      <div class="menu">
        <ul>
          
          <li><a href="/jobs/"> Jobs </a></li>
          
          <li><a href="/our-work/"> Our work </a></li>
          
          <li><a href="/community/"> Community </a></li>
          
          <li><a href="/blog/"> Blog </a></li>
          
          <li><a href="/about/"> About us </a></li>
          
          <li><a href="/docs/"> Docs </a></li>
          
        </ul>
      </div>
    </section>

  </header>
</div>









    <div class="article">
      <section class="outer-container">
        <div class="row">
            <div class="sixteen columns">
                <article class="li-article">
                
                    <header class="li-article-header">
                        <h1 class="li-article-title">Updating the kernel of a running system</h1>
                        <span class="li-article-taxonomies">
                            

                            
                        </span>
                        
                        
                    </header>
                    <section>
                        <p>As an install step, the Linux kernel (with BBL) can always be written on the host card reader. However,
for regular use, it is inconvenient to keep swapping the card between devices.
If you already have a running Linux system, perhaps based on the pre-made
executables, it is possible to replace the kernel in the running system, which saves wear and tear from
regularly swapping cards between target system and PC. To use this method proceed as follows:</p>

<p>On the target system (first time only, optional):</p>

<pre><code>adduser upload
</code></pre>

<p>You will need to choose a password and ensure the network is running. If you don&rsquo;t want to create an upload user,
your own username created in the firstboot process will do equally well.</p>

<p>Generate a public key (optional, but more convenient if you don&rsquo;t already have one):</p>

<pre><code>ssh-keygen -t rsa
</code></pre>

<p>On the host (first time only, if you have a public key):</p>

<pre><code>ssh-copy-id upload@192.168.0.51 # substitute your boards' own IP address
</code></pre>

<p>On the host:</p>

<pre><code>cd $TOP/fpga/board/nexys4_ddr
sftp upload@192.168.0.51 # substitute your boards' own IP address
put boot.bin
quit
</code></pre>

<p>On the target system, logged in as root, proceed as follows:</p>

<pre><code>cd /home/upload
mv boot.bin /mnt/dos # ignore error about preserving ownership
halt
</code></pre>

<p>You cannot upload directly to the DOS filing system because it does not support credentials so only
root and write to it normally, and root login via sftp is disabled for security reasons. After the final
shutdown message is printed, the reset button may be used to reboot.</p>

<p>Next recommended step:</p>

<ul>
<li><a href="https://www.lowrisc.org/docs/boot-customised-nfs/">Booting a customised NFS system</a></li>
</ul>

                    </section>
                </article>

        </div>
      </section>
    </div>
    


                

        <footer>

          <section class="outer-container">

            <div>
              <div class="link-container">
              </div>
            </div>

            <p>
              Unless otherwise noted, content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution ShareAlike 4.0 International License</a>
            </p>

          </section>

        </footer>
    </body>
</html>

    </body>
</html>

