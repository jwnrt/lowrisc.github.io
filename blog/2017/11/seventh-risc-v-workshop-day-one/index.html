<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Seventh RISC-V Workshop: Day One &middot; lowRISC</title>
        <link rel="stylesheet" href="http://www.lowrisc.org/css/styles.combined.min.css" />
        <link rel="shortcut icon" href="http://www.lowrisc.org/favicon.ico" />
        <link rel="alternate" href="http://www.lowrisc.org/index.xml" type="application/rss+xml" title="lowRISC" />
        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' type='text/css'>
        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Exo+2' type='text/css'>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-53520714-1', 'auto');
        ga('send', 'pageview');
      </script>
  </head>

  <body data-page="article">
<div class="header">
  <header data-component="menu">

    <section class="outer-container">
      <div class="image">
        <a href="http://www.lowrisc.org"><img src="http://www.lowrisc.org/img/logo.svg"></a>
      </div>

      <div class="menu">
        <ul>
          
          <li><a href="/"> Home </a></li>
          
          <li><a href="/about/"> About </a></li>
          
          <li><a href="/blog/"> Blog </a></li>
          
          <li><a href="/faq/"> FAQ </a></li>
          
          <li><a href="/docs/"> Docs </a></li>
          
          <li><a href="/community/"> Community </a></li>
          
        </ul>
      </div>
    </section>

  </header>
</div>









    <div class="article">
      <section class="outer-container">
        <div class="row">
            <div class="sixteen columns">
                <article class="li-article">
                
                    <header class="li-article-header">
                        <h1 class="li-article-title">Seventh RISC-V Workshop: Day One</h1>
                        <span class="li-article-taxonomies">
                            

                            
                        </span>
                        
                        
                        <time class="li-article-date">Tuesday, November 28, 2017</time>
                        
                    </header>
                    <section>
                        

<p>The <a href="https://riscv.org/2017/10/7th-risc-v-workshop-agenda/">seventh RISC-V
workshop</a> is going
on today and tomorrow at Western Digital in Milpitas. I&rsquo;ll be
keeping a semi-live blog of talks and announcements throughout the day.</p>

<h2 id="introduction-rick-o-conor:b3d82df2c32815668820ecff5dcd0b9a">Introduction: Rick O&rsquo;Conor</h2>

<ul>
<li>Workshop is sold out, 498 attendees registered representing 138 companies
and 35 universities.</li>
<li>There will be 47 sessions squeezed into 12 and 24 minute increments, plus 26
poster / demo sessions.</li>
<li>The 8th RISC-V workshop will be held on May 7th-10th at the Barcelona
Supercomputing Center and Universitat Politecnica de Catalunya.</li>
<li>Rick gives a refresher on the structure of the RISC-V Foundation.</li>
<li>The RISC-V Foundation now has only 100 members (including individual
members).</li>
<li>We&rsquo;re on a <em>tight</em> schedule today. No applause and no questions!</li>
</ul>

<h2 id="risc-v-state-of-the-union-krste-asanovic:b3d82df2c32815668820ecff5dcd0b9a">RISC-V state of the union: Krste Asanovic</h2>

<ul>
<li>Krste gives a rapid overview of the RISC-V ISA.</li>
<li>RISC-V aims to be simple, clean-slate, modulary, and stable.</li>
<li>RISC-V started in May 2010. v1.0 of the ISA came in 2011, first Rocket
tapeout in 2012, first Linux port in 2013, v2.0 (frozen) IMAFD spec in 2014.
First commercial softcores and first commercial SoC in 2017.</li>
<li>Large companies are adopting RISC-V for deeply embedded controllers in their
SoCs (&ldquo;minion cores&rdquo;), replacing home-grown and commercial cores.

<ul>
<li>[Editor&rsquo;s note: pleasing to see the &ldquo;minion core&rdquo; name take off around the
wider RISC-V community!].</li>
</ul></li>
<li>Small and proprietary-ISA soft-core IP companies are switching to the RISC-V
standard to access a larger market. &ldquo;If you&rsquo;re a softcore IP provider, you
should have a RISC-V product in development&rdquo;.</li>
<li>RISC-V has seen government adoption, e.g. India adopted it as a national
ISA. A recent security-focused DARPA project standardised on RISC-V. Israel
Innovation Authority are creating the GenPro platform around RISC-V.</li>
<li>Many startups are choosing RISC-V for new products. &ldquo;We haven&rsquo;t had to tell
startups about RISC-V; they find out about it very quickly when shopping for
processor IP&rdquo;.</li>
<li>Commercial ecosystem providers: starting to see mainstream commercial
support. &ldquo;Demand is driving supply in the commercial ecosystem&rdquo;.</li>
<li>RISC-V in academic research: becoming the standard ISA for academic
research. There will be talks at the workshop about the Celerity 500 RISC-V
core SoC in 16nm FinFET, and FireSim which models 1024 quad-core RISC-V
servers in the cloud.

<ul>
<li>The CARRV RISC-V workshop at MICRO was even better attended than the
machine learning workshop.</li>
</ul></li>
<li>Expect in a few years time that the vast majority of undergraduates will be
taught RISC-V at University.</li>
<li>Racepoint Global have been hired for Foundation marketing.</li>
<li>RISC-V Technical Roadmap for 2017:

<ul>
<li>Primary goal was to formally standardise the base ISA, resolve issues with
the memory model, debug, and stabilize the privileged architecture.</li>
<li>Good progress has been made, but the spec hasn&rsquo;t yet been ratified. One of
the issues is differentiating the base spec versus clarifications for
different &ldquo;profiles&rdquo;. There is no plan to change any instruction
specification versus 2.0.</li>
<li>The Unix platform is stable as of the privileged 1.10 spec (i.e. no
backwards incompatible changes from now on).</li>
</ul></li>
<li>ISA specifications and profiles

<ul>
<li>The original ISA specs mixed instruction specifications with platform
mandates. Now work is ongoing to separate instruction set specifications
from platform profiles.</li>
<li>Instruction set specifications should be maximally reusable, while the
profiles should be as constrained as possible to simplify software
compatibility.</li>
</ul></li>
<li>Single-letter names will run out some day, so a proposal has been made to
allow finer-grained naming of instruction sets to describe profiles. Use Zxxxx
to name standard instruction extensions (while Xyyyyy is used for non-standard
instruction extensions). See the isa-dev list for more information.</li>
<li>Profiles for software compatibility. A software ABI/SBI defines a profile.
A software ABI/SBI defines a profile. Also need profiles M-mode-only
microcontrollers, and MU-mode microcontrollers, and for booting MSU platforms.
Aim for have first ready in Q12018.</li>
<li>Memory model: the original was too weak for C11 and underspecified, but a
team of experts have come together over the past year to resolve the issues.
RVWMO is the base memory model and is weak, while RVTSO is an optional
extension providing a strong TSO memory model.</li>
<li>Calling convention and ABI has been stabilized and documented.</li>
<li>GCC and binutils have been upstreamed and released in GCC. LLVM upstream is
in progress.</li>
<li>A number of other compilers and languages are now available. e.g. CompCert,
Go, Rust, OCaml, Jikes JVM, OpenJDK, &hellip;</li>
<li>The Linux port has been accepted upstream for the 4.15 release.<br />
Additionally, the hypervisor spec has been released (designed to support
recursive virtualisation using an enhanced S mode).</li>
<li>Run-halt debug going well, is being targeted by commercial vendors.</li>
<li>2017 summary: All planned major technical decisions settled, some more work
on the ratification process is needed.</li>
<li>Technical roadmap goals for 2018:

<ul>
<li>Complete ratification of base ISA and first profiles</li>
<li>Base vector extensions proposed and ratified</li>
<li>Hypervisor implemented, spec ratified</li>
<li>Formal spec completed and released</li>
</ul></li>
<li>Vector: see the talk from Roger. Aim to be the Best Vector ISA Ever &trade;.</li>
<li>Security: really two separable efforts in the foundation: trusted execution
environments and cryptographic instruction extensions. Also a huge amount of
other work in the academic community.</li>
<li>Interrupts: currently have fast local interrupts and global platform-level
interrupts. Also have requests for high end systems who want per-hart
message-signal interrupts (MSI) and from low-end embedded that want
pre-emptive vectored prioritized interrupts.</li>
<li>Improving embedded compression: the C extension was designed for general
purpose computing with Unix binaries. People are seeing non-competitive RISC-V
code size on pure embedded workloads, like due to lack of byte/halfword memory
access? Considering an alternative C extension for RV32E systems.</li>
<li>A new task group has been up for the &lsquo;J&rsquo; extension, exploring support for
dynamically translated languages. Looking at issues like integer overflow,
garbage collection, and instruction cache management.</li>
<li>Summary

<ul>
<li>Very rapid development and adoption &ldquo;by the time you decide to do a
project, support will be there&rdquo;.</li>
</ul></li>
<li>Question: does the foundation have any formal ways of addressing IP
challenges? Answer: have been documenting prior art for the base ISA
instructions. Would be good to continue to expand this to cover reference
hardware implementations.</li>
</ul>

<h2 id="risc-v-hyupervisor-extension-andrew-waterman:b3d82df2c32815668820ecff5dcd0b9a">RISC-V Hyupervisor Extension: Andrew Waterman</h2>

<ul>
<li>Presenting work with extensive contributions from Paolo Bonzini and John
Hauser</li>
<li>Goal is to virtualize S-mode to support running guest OSes under Type-1,
Type-2 and hybrid hypervisors. Also want to be high performance and to support
recursive virtualisation.</li>
<li>The hypervisor extension adds new privileged modes. S-mode becomes HS-mode,
and we also add the Virtualised Supervisor (VS) and Virtualized User (VU)
modes.</li>
<li>What needs to be virtualized? Supervisor architecture state (CSRs), memory,
I/O and interrupts.</li>
<li>Additional copies of most supervisor CSrs are provisioned as background
supervisor CSRs, e.g. bsscratch, bsepc. In HS-mode, foreground CSRs contain
S-mode state and background CSRs contain inactive VS-mode state. These are
swapped in VS-mode.</li>
<li>Use two-level address translation to virtualize memory. Original virtual
addresses are translated to guest physical addresses by the VS-level page
table, and then guest physical addresses are translated to machine physical
addresses by the HS-level page table.

<ul>
<li>Page table entry formats and page table layouts are the same as S-mode</li>
</ul></li>
<li>Software and timer interrupts are easy to virtualise, as they&rsquo;re already
exposed via the SBI. The two-level paging scheme can be used to trap MMIO
accesses.

<ul>
<li>Could avoid extra traps into the hypervisor with a virtualisation-aware
PLIC. This is considered a platform issues, outside of the scope of the
hypervisor ISA.</li>
</ul></li>
<li>Need an I/O MMU to initiated DMAs without trap into the hypervisor - also a
platform issue.</li>
<li>The hypervisor extension is designed to be efficiently emulatable on M/S/U
systems with traps into M-mode.</li>
<li>Specification v.01 is <a href="https://github.com/riscv/riscv-isa-manual">available on
GitHub</a>. Hoping to implement in
Spike in Q1 2018.</li>
<li>Want to see a silicon implementation prior to ratification.</li>
</ul>

<h2 id="risc-v-memory-consistency-model-status-update-dan-lustig:b3d82df2c32815668820ecff5dcd0b9a">RISC-V memory consistency model status update: Dan Lustig</h2>

<ul>
<li>The goal was to define the RISC-V memory consistency model (&ldquo;specifies the
values that can be returned by loads&rdquo;). Support a wide range of hardware
implementations, as well as Linux, C/C++ and lots of other critical software.</li>
<li>The fundamental debate was about strong models (such as x86-TSO) vs weak
models (ARM, IBM Power). Strong models have stricter ordering rules, resulting
in something that&rsquo;s simpler for programmers and for architects. Weak models
have more relaxed ordering rules, better performance/power/area and more
microarchitectural freedom.</li>
<li>In order to find a compromise, defined RVTSO (strong) and RVWMO (weak).

<ul>
<li>Both are multi-copy atomic. This means cores are allowed to peek at stores
they have issues as long as they haven&rsquo;t been observed by anyone else and is
much simpler to reason about than the Power and ARMv7 memory models.</li>
</ul></li>
<li>The base RISC-V memory model is RVWMO (software must assume this if it wants
to be portable). It&rsquo;s important to note that a hardware implementation meeting
the RVWMO specification could be more conservative (stronger). Additional have
the Ztso extension for RVTSO, which software might target.</li>
<li>RVWMO and RVTSO differ in the degree of memory access reordering they permit
at the point of global visibility. In RVTSO, only store-to-load reordering can
be observed. In RVWMO, most memory accesses can be reordered freely unless
synchronized via .sq, .rl and/or fences.</li>
<li>Dan has some handy diagrams that explain the RVWMO and RVTSO rules in a
nutshell, which you should be able to study once the slides become available.</li>
<li>Software written for RVWMO will run on all RISC-V hardware (RVWMO and Ztso).
RVTSO-only software can be be written, but will only run on hardware
implementing Ztso. A flag in the ELF header will be used to ensure this.</li>
<li>If you don&rsquo;t want to think about memory models, just use the standard OSes
and toolchains. If you care about PPA or flexibility, use RVWMO. If you have
lots of legacy x86 code, use hardware implementing Ztso so that any software
will work. If you believe TSO is the future, use hardware with Ztso and emit
code with the TSO-only magic number.</li>
<li>Fragmentation due to the presence of two memory models is an obvious risk.
Try to discourage software from targeting both, and encourage targeting RVWMO
wherever possible (redundant fences simple become no-ops).</li>
<li>There have been a number of other ISA changes. ld.rl and sd.aq are
deprecated. ld.aqrl and sd.aqrl mean RCsc. Also clarified other subtleties.<br />
May have future extensions to the fence instruction, and .aq/.rl variants for
byte and halfware-size loads/stores.</li>
</ul>

<h2 id="risc-v-enabling-a-new-era-of-open-data-centric-computing-architectures-martin-fink:b3d82df2c32815668820ecff5dcd0b9a">RISC-V - Enabling a new era of open data-centric computing architectures: Martin Fink</h2>

<ul>
<li>Most people think of Western Digital as a storage company, but actually
they&rsquo;re a <em>data</em> company.</li>
<li>Big data is well known, but increasingly there are applications that require
&ldquo;fast data&rdquo; (immediate access to information).</li>
<li>Big data applications have historically focused on general purpose compute.<br />
But we need to be able to move beyond general purpose compute to meet new
application requirements.</li>
<li>In a general purpose compute architecture, everything is centered around the
CPU rather than the data.</li>
<li>Workload diversity demands diverse technologies and architectures, both for
&ldquo;big data&rdquo; and &ldquo;fast data&rdquo;.</li>
<li>There are a wide range of data-centric applications at the edge.</li>
<li>RISC-V meets the needs of big data (move compute to data) and fast data
(memory centric compute). It enables purpose-built environments for big data
and fast data applications.</li>
<li>Western Digital ships in excess of 1 billion cores per year, and expect to
double that. They are making a commitment to transition all of those 1 billion
cores towards RISC-V, across their whole product portfolio.</li>
<li>Want to process the data where it lives, which RISC-V will help to enable.</li>
<li>Represents a new style of development. In some cases, WD may develop their
own cores, in others may buy them, in others may partner with another company
to co-develop them.</li>
<li>Western Digital will work to accelerate the RISC-V ecosystem:

<ul>
<li>Support the development of open source IP building blocks for the
community</li>
<li>Actively partner and invest in the ecosystem</li>
<li>Accelerate development of purpose-built processors for a broad range of
Big Data and Fast Data environments</li>
<li>Multi-year transition of Western Digital devices, platforms and systems to
RISC-V purpose built architectures</li>
</ul></li>
<li>First device from WD with a RISC-V core is likely to not ship until late
2019 to early 2020.</li>
<li>Summary

<ul>
<li>Big Data and Fast Data need purpose-built environments</li>
<li>Openness and ecosystem enable best-in-class innovation. The motivation is
enabling innovation, <em>not</em> reducing cost.</li>
<li>Western Digital brings the momentum of other 1B cores per year</li>
</ul></li>
</ul>

<h2 id="industrial-strength-high-performan-risc-v-processors-for-energy-efficient-computing-dave-ditzel:b3d82df2c32815668820ecff5dcd0b9a">Industrial-strength high-performan RISC-V processors for energy-efficient computing: Dave Ditzel</h2>

<ul>
<li>Coming out of &ldquo;stealth mode&rdquo; in this talk.</li>
<li>Chris Celio is joining Esperanto, but will continue to maintain and support
BOOM. Esperanto will also be implementing even higher performance out-of-order
processors.</li>
<li>Esperanto have been pursuing an implementing of the draft Vector ISA in
order to understand design trade-offs.</li>
<li>RISC-V is off to a great start, but many in industry view RISC-V as a
curiosity or toy, only for low end. Repeatedly see questions about high-end
designs (in Verilog!), graphics, machine learning, or HPC applications.</li>
<li>See Esperanto as complementing existing core vendors, &ldquo;expanding RISC-V&rsquo;s
piece of the pie&rdquo;.</li>
<li>Experanto is designing a high-performance RISC-V core comparable to the best
IP alternatives. It is designing an energy-efficient RISC-V core for high
TeraFLOP computing needs. The goal is to make RISC-V more compelling than the
other high-end alternatives.</li>
<li>Will produce IP with human readable, synthesizable Verilog.</li>
<li>Esperanto is building the highest TeraFLOPS per Watt machine learning
computing system, and it will be based on the RISC-V ISA</li>
<li>ET-Maxion will be the highest single thread performance 64-bit RISC-V
processor. Starting from BOOM v2, but expect substantial changes. Optimized
for 7nm CMOS. This will be used in Esperanto&rsquo;s products and made available as
a licensable core.</li>
<li>Second core is the ET-Minion. This is intended to do all the heavy floating
point work, with very high floating point throughput and energy efficiency.
This will be a 64-bit RISC-V core with vector extensions, an in-order
pipeline, and extra instruction extensions for machine learning. Also have
multiple hardware threads of execution. Like the ET-Maxion, this will be used
in Esperanto products and available as a licensable core.</li>
<li>Putting these together in a product: Esperanto&rsquo;s AI supercomputer on a chip.<br />
16 64-bit ET-Maxion RISC-V cores with private L1 and L2 caches, 4096 64-bit
ET-Minion RISC-V cores each with their own vector floating point unit,
hardware accelerators, Network on Chip to allow processors to reside in the
same address space, multiple levels of cache, etc.</li>
<li>Other companies are proposing special purpose hardware for machine learning
using proprietary instruction sets. Esperanto want to base all processing on
RISC-V, adding instruction extensions and hardware accelerators where
necessary.</li>
<li>Also looked at using RISC-V for graphics. Wrote a shader cmpiler that can
generate RISC-V compilers, and the code to distribute the workload across
thousands of cores.</li>
<li>Argue that proprietary, custom instruction sets are a bad choice. Instead,
make general purpose RISC-V processors with domain specific extensions when
needed.</li>
</ul>

<h2 id="andes-extended-features-dr-chuan-hua-chang:b3d82df2c32815668820ecff5dcd0b9a">Andes Extended Features: Dr Chuan-Hua Chang</h2>

<ul>
<li>Andes Technology is a Taiwan-based CPU IP company with over 2 billion
Andes-Embedded SoCs shipped in diverse applications.</li>
<li>Have extended the RISC-V architecture in the V4m with:

<ul>
<li>Vectored interrupts and priority-based preemptive interrupts for the PLIC</li>
<li>StackSafe features</li>
<li>Exception redirection to the debuggers</li>
</ul></li>
<li>The V5m ISA includes

<ul>
<li>Andes Perfomance extension</li>
<li>Optional Andes DSP extension</li>
<li>Optional Andes Custom extension</li>
</ul></li>
</ul>

<p><em>Alex Bradbury</em></p>

                    </section>
                </article>

        </div>
      </section>
    </div>
    


                

            <div id="disqus_thread"></div>
            <script type="text/javascript">
                 
                var disqus_shortname = 'lowrisc'; 
                var disqus_identifier = "/" + "blog/2017/11/seventh-risc-v-workshop-day-one";
                var disqus_title = "Seventh RISC-V Workshop: Day One";
                var disqus_url = "http://www.lowrisc.org" + "blog/2017/11/seventh-risc-v-workshop-day-one";

                 
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>
            

        <footer>

          <section class="outer-container">

            <div>
              <div class="link-container">
              </div>
            </div>

            <p>
              Unless otherwise noted, content on this site is licensed under a Creative Commons Attribution ShareAlike 4.0 International License
            </p>

          </section>

        </footer>
    </body>
</html>


    </body>
</html>

